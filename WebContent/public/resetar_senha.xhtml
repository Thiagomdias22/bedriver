<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<f:metadata>
	<f:event type="preRenderView"
		listener="#{alterarSenhaBean.validaToken(param.token)}" />
</f:metadata>

<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<h:outputStylesheet name="cadastro.css" library="css" />
	<title>Resetar Senha</title>
</h:head>
<h:body>

	<div id="header">
		<h:form>
			<p:commandLink action="/public/home.xhtml">
				<h:graphicImage library="imagens" name="seta_left.png"
					style="border:0" styleClass="seta_left" />
			</p:commandLink>
		</h:form>

		<h1>Atualizar Senha</h1>

	</div>

	<div class="container">

		<h:form id="cadastro" rendered="#{alterarSenhaBean.usuario != null}">

			<div id="spam">
				<h2>Insira uma nova senha</h2>
			</div>

			<h:panelGrid columns="1">
				<h:outputLabel value="Senha:" for="senha" styleClass="text" />
				<h:inputSecret id="senha" label="Senha"
					value="#{alterarSenhaBean.novaSenha}" size="10" maxlength="10"
					required="true" redisplay="true" styleClass="input" />

				<h:outputLabel value="Confirmar Senha:" for="confirmarsenha"
					styleClass="text" />
				<h:inputSecret id="confirmarsenha" label="Confirmar Senha"
					value="#{alterarSenhaBean.confirmarNovaSenha}" size="10"
					maxlength="10" required="true" redisplay="true" styleClass="input" />
				<p:messages for="MessageId" showDetail="true" autoUpdate="true"
					closable="true" />
			</h:panelGrid>

			<div class="button">
				<p:commandButton action="#{alterarSenhaBean.salvarNovaSenha}"
					value="Atualizar" styleClass="apply"
					onclick="alert('Sua senha foi alterada!')"
					ajax="false">
				</p:commandButton>
			</div>

		</h:form>

		<h:form rendered="#{alterarSenhaBean.usuario == null}">
			<h1 style="color: black;">Token Inv√°lido.</h1>
		</h:form>
	</div>
</h:body>
</html>